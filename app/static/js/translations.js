// app/static/js/translations.js
const translations = {
    en: {
        // Common
        'wedding.title': 'Irene & Jaime\'s Wedding',
        'wedding.date': 'June 6, 2026',
        'our.wedding': 'Our Wedding',

        // Navigation
        'nav.home': 'Home',
        'nav.schedule': 'Schedule',
        'nav.venue': 'Venue',
        'nav.accommodation': 'Accommodation',
        'nav.activities': 'Activities',
        'nav.gallery': 'Gallery',
        'nav.rsvp': 'RSVP',

        // Home page cards
        'card.rsvp': 'RSVP',
        'card.schedule': 'Schedule',
        'card.venue': 'Venue',
        'card.accommodation': 'Accommodation',
        'card.activities': 'Activities',
        'card.gallery': 'Gallery',

        // Footer
        'footer.contact': 'Contact',
        'footer.message': 'We can\'t wait to celebrate with you!',
        'footer.copyright': '© 2026 Irene & Jaime Wedding',

        // RSVP Landing
        'rsvp.title': 'Wedding RSVP',
        'rsvp.landing.message': 'Please use the link provided in your invitation to access the RSVP form.',
        'rsvp.lost.invitation': 'Did you lose your invitation?',
        'rsvp.lost.message': 'If you\'ve lost your invitation with the RSVP link, please contact us directly and we\'ll help you out.',
        'rsvp.return.home': 'Return to Home',

        // RSVP Form
        'rsvp.welcome': 'Welcome',
        'rsvp.last.updated': 'Last updated',
        'rsvp.will.attend': 'Will you attend?',
        'rsvp.yes': 'Yes, I will attend',
        'rsvp.no': 'No, I cannot attend',
        'rsvp.accommodation.title': 'Accommodation',
        'rsvp.where.staying': 'Where are you staying?',
        'rsvp.hotel.placeholder': 'Enter hotel name or leave blank if undecided',
        'rsvp.hotel.help': 'Please let us know where you\'ll be staying.',
        'rsvp.transport.title': 'Transportation',
        'rsvp.transport.question': 'Would you like us to arrange transportation?',
        'rsvp.transport.church': 'Transport to church',
        'rsvp.transport.reception': 'Transport to reception',
        'rsvp.transport.hotel': 'Transport to hotel',
        'rsvp.dietary.title': 'Dietary Restrictions',
        'rsvp.dietary.other': 'Other Dietary Restrictions',
        'rsvp.dietary.placeholder': 'Please specify any other dietary restrictions',
        'rsvp.family.title': 'Family Members',
        'rsvp.additional.adults': 'Number of Additional Adults',
        'rsvp.children.count': 'Number of Children',
        'rsvp.guest.name': 'Name',
        'rsvp.plus.one': 'Plus One',
        'rsvp.submit': 'Submit RSVP',
        'rsvp.cancel': 'Cancel RSVP',
        'rsvp.confirmed': 'You have confirmed your attendance.',
        'rsvp.cancelled': 'RSVP Cancelled',
        'rsvp.cancelled.message': 'Your RSVP has been cancelled.',
        'rsvp.change.mind': 'If you change your mind before the RSVP deadline, please contact us directly at',

        // RSVP Confirmations
        'rsvp.thank.you': 'Thank You!',
        'rsvp.excited': 'We\'re excited that you\'ll be joining us for our special day!',
        'rsvp.success': 'Your RSVP has been successfully submitted.',
        'rsvp.update.note': 'You can return to this link at any time before the RSVP deadline to update your response.',
        'rsvp.miss.you': 'We\'ll Miss You',
        'rsvp.declined.message': 'Your RSVP has been recorded as declined.',
        'rsvp.sorry': 'We\'re sorry you can\'t make it to our celebration.',

        // Schedule Modal
        'schedule.title': 'Wedding Schedule',
        'schedule.ceremony': 'Ceremony',
        'schedule.cocktail': 'Cocktail Hour',
        'schedule.reception': 'Reception',
        'schedule.dinner': 'Dinner',
        'schedule.dancing': 'Dancing',

        // Venue Modal
        'venue.title': 'Wedding Venue',
        'venue.location': 'Location',
        'venue.getting.there': 'Getting There',

        // Accommodation Modal
        'accommodation.title': 'Accommodation',
        'accommodation.special.rate': 'Special rate',

        // Activities Modal
        'activities.title': 'Things to Do',
        'activities.location': 'Location',
        'activities.cost': 'Cost',

        // Gallery Modal
        'gallery.title': 'Our Gallery',
        'gallery.first.meet': 'First time we met',
        'gallery.engagement': 'Our engagement day',
        'gallery.traveling': 'Traveling together',
        'gallery.special': 'Special moments',
        'gallery.holiday': 'Holiday memories',
        'gallery.celebrating': 'Celebrating together',

        // Common actions
        'action.close': 'Close',
        'action.submit': 'Submit',
        'action.cancel': 'Cancel',
        'action.back': 'Go Back',
        'action.confirm': 'Confirm',

        // Alerts and messages
        'alert.changes.restricted': 'Changes Restricted',
        'alert.changes.not.possible': 'Changes are not possible within',
        'alert.days.of.wedding': 'days of the wedding date.',
        'alert.need.assistance': 'Need assistance? Contact us at:',
        'alert.deadline.passed': 'RSVP Deadline Has Passed',
        'alert.deadline.message': 'We\'re sorry, but the RSVP deadline has passed.',
        'alert.current.status': 'Your Current RSVP Status:',
        'alert.confirmed.attendance': 'You have confirmed your attendance. Thank you!',
        'alert.declined.invitation': 'You have declined the invitation.',
        'alert.make.changes': 'If you need to make changes to your RSVP, please contact us directly.',

        // Additional texts
        'child': 'Child',
        'adult': 'Additional Adult',
        'none': 'None',
        'free': 'Free',
        'per.person': 'per person',
        'for.tasting': 'for tasting tour'
    },
    es: {
        // Common
        'wedding.title': 'Boda de Irene y Jaime',
        'wedding.date': '6 de Junio, 2026',
        'our.wedding': 'Nuestra Boda',

        // Navigation
        'nav.home': 'Inicio',
        'nav.schedule': 'Programa',
        'nav.venue': 'Lugar',
        'nav.accommodation': 'Alojamiento',
        'nav.activities': 'Actividades',
        'nav.gallery': 'Galería',
        'nav.rsvp': 'RSVP',

        // Home page cards
        'card.rsvp': 'RSVP',
        'card.schedule': 'Programa',
        'card.venue': 'Lugar',
        'card.accommodation': 'Alojamiento',
        'card.activities': 'Actividades',
        'card.gallery': 'Galería',

        // Footer
        'footer.contact': 'Contacto',
        'footer.message': '¡Estamos deseando celebrar con vosotros!',
        'footer.copyright': '© 2026 Boda Irene y Jaime',

        // RSVP Landing
        'rsvp.title': 'RSVP de Boda',
        'rsvp.landing.message': 'Por favor, usa el enlace proporcionado en tu invitación para acceder al formulario RSVP.',
        'rsvp.lost.invitation': '¿Has perdido tu invitación?',
        'rsvp.lost.message': 'Si has perdido tu invitación con el enlace RSVP, por favor contáctanos directamente y te ayudaremos.',
        'rsvp.return.home': 'Volver al Inicio',

        // RSVP Form
        'rsvp.welcome': 'Bienvenido/a',
        'rsvp.last.updated': 'Última actualización',
        'rsvp.will.attend': '¿Asistirás?',
        'rsvp.yes': 'Sí, asistiré',
        'rsvp.no': 'No, no puedo asistir',
        'rsvp.accommodation.title': 'Alojamiento',
        'rsvp.where.staying': '¿Dónde te alojarás?',
        'rsvp.hotel.placeholder': 'Introduce el nombre del hotel o déjalo en blanco si no lo has decidido',
        'rsvp.hotel.help': 'Por favor, haznos saber dónde te alojarás.',
        'rsvp.transport.title': 'Transporte',
        'rsvp.transport.question': '¿Te gustaría que organicemos el transporte?',
        'rsvp.transport.church': 'Transporte a la iglesia',
        'rsvp.transport.reception': 'Transporte a la recepción',
        'rsvp.transport.hotel': 'Transporte al hotel',
        'rsvp.dietary.title': 'Restricciones Dietéticas',
        'rsvp.dietary.other': 'Otras Restricciones Dietéticas',
        'rsvp.dietary.placeholder': 'Por favor especifica cualquier otra restricción dietética',
        'rsvp.family.title': 'Miembros de la Familia',
        'rsvp.additional.adults': 'Número de Adultos Adicionales',
        'rsvp.children.count': 'Número de Niños',
        'rsvp.guest.name': 'Nombre',
        'rsvp.plus.one': 'Acompañante',
        'rsvp.submit': 'Enviar RSVP',
        'rsvp.cancel': 'Cancelar RSVP',
        'rsvp.confirmed': 'Has confirmado tu asistencia.',
        'rsvp.cancelled': 'RSVP Cancelado',
        'rsvp.cancelled.message': 'Tu RSVP ha sido cancelado.',
        'rsvp.change.mind': 'Si cambias de opinión antes de la fecha límite del RSVP, por favor contáctanos directamente en',

        // RSVP Confirmations
        'rsvp.thank.you': '¡Gracias!',
        'rsvp.excited': '¡Estamos emocionados de que nos acompañes en nuestro día especial!',
        'rsvp.success': 'Tu RSVP se ha enviado correctamente.',
        'rsvp.update.note': 'Puedes volver a este enlace en cualquier momento antes de la fecha límite del RSVP para actualizar tu respuesta.',
        'rsvp.miss.you': 'Te Echaremos de Menos',
        'rsvp.declined.message': 'Tu RSVP ha sido registrado como rechazado.',
        'rsvp.sorry': 'Sentimos que no puedas asistir a nuestra celebración.',

        // Schedule Modal
        'schedule.title': 'Programa de la Boda',
        'schedule.ceremony': 'Ceremonia',
        'schedule.cocktail': 'Cóctel',
        'schedule.reception': 'Recepción',
        'schedule.dinner': 'Cena',
        'schedule.dancing': 'Baile',

        // Venue Modal
        'venue.title': 'Lugar de la Boda',
        'venue.location': 'Ubicación',
        'venue.getting.there': 'Cómo Llegar',

        // Accommodation Modal
        'accommodation.title': 'Alojamiento',
        'accommodation.special.rate': 'Tarifa especial',

        // Activities Modal
        'activities.title': 'Qué Hacer',
        'activities.location': 'Ubicación',
        'activities.cost': 'Coste',

        // Gallery Modal
        'gallery.title': 'Nuestra Galería',
        'gallery.first.meet': 'Primera vez que nos conocimos',
        'gallery.engagement': 'Nuestro día de compromiso',
        'gallery.traveling': 'Viajando juntos',
        'gallery.special': 'Momentos especiales',
        'gallery.holiday': 'Recuerdos de vacaciones',
        'gallery.celebrating': 'Celebrando juntos',

        // Common actions
        'action.close': 'Cerrar',
        'action.submit': 'Enviar',
        'action.cancel': 'Cancelar',
        'action.back': 'Volver',
        'action.confirm': 'Confirmar',

        // Alerts and messages
        'alert.changes.restricted': 'Cambios Restringidos',
        'alert.changes.not.possible': 'No es posible hacer cambios dentro de',
        'alert.days.of.wedding': 'días de la fecha de la boda.',
        'alert.need.assistance': '¿Necesitas ayuda? Contáctanos en:',
        'alert.deadline.passed': 'La Fecha Límite del RSVP Ha Pasado',
        'alert.deadline.message': 'Lo sentimos, pero la fecha límite del RSVP ha pasado.',
        'alert.current.status': 'Tu Estado RSVP Actual:',
        'alert.confirmed.attendance': 'Has confirmado tu asistencia. ¡Gracias!',
        'alert.declined.invitation': 'Has rechazado la invitación.',
        'alert.make.changes': 'Si necesitas hacer cambios en tu RSVP, por favor contáctanos directamente.',

        // Additional texts
        'child': 'Niño',
        'adult': 'Adulto Adicional',
        'none': 'Ninguno',
        'free': 'Gratis',
        'per.person': 'por persona',
        'for.tasting': 'para tour de cata'
    }
};

// Translation system
class TranslationSystem {
    constructor() {
        this.currentLang = localStorage.getItem('preferredLanguage') || 'en';
        this.translations = translations;
    }

    setLanguage(lang) {
        this.currentLang = lang;
        localStorage.setItem('preferredLanguage', lang);
        document.documentElement.lang = lang;
        this.updatePageTranslations();
        this.updateLanguageButtons();
    }

    t(key) {
        return this.translations[this.currentLang][key] || this.translations['en'][key] || key;
    }

    updatePageTranslations() {
        // Update all elements with data-translate attribute
        document.querySelectorAll('[data-translate]').forEach(element => {
            const key = element.getAttribute('data-translate');
            const translation = this.t(key);

            if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                if (element.placeholder) {
                    element.placeholder = translation;
                }
            } else {
                element.textContent = translation;
            }
        });

        // Update all elements with data-translate-html attribute (for HTML content)
        document.querySelectorAll('[data-translate-html]').forEach(element => {
            const key = element.getAttribute('data-translate-html');
            element.innerHTML = this.t(key);
        });

        // Update document title
        document.title = this.t('wedding.title');

        // Fire custom event for any additional updates needed
        document.dispatchEvent(new CustomEvent('languageChanged', {
            detail: { language: this.currentLang }
        }));
    }

    updateLanguageButtons() {
        // Update language button states
        document.querySelectorAll('.lang-btn').forEach(btn => {
            const btnLang = btn.textContent.toLowerCase();
            if (btnLang === this.currentLang) {
                btn.classList.add('active');
            } else {
                btn.classList.remove('active');
            }
        });
    }

    // Helper method to translate dynamic content
    translateDynamic(key, replacements = {}) {
        let translation = this.t(key);
        Object.keys(replacements).forEach(placeholder => {
            translation = translation.replace(`{${placeholder}}`, replacements[placeholder]);
        });
        return translation;
    }
}

// Initialize translation system when DOM is ready
document.addEventListener('DOMContentLoaded', function () {
    window.translator = new TranslationSystem();

    // Set initial language
    window.translator.updatePageTranslations();

    // Handle language button clicks
    document.addEventListener('click', function (e) {
        if (e.target.classList.contains('lang-btn')) {
            e.preventDefault();
            const newLang = e.target.textContent.toLowerCase();
            window.translator.setLanguage(newLang);
        }
    });
});

// Export for use in other scripts
window.TranslationSystem = TranslationSystem;