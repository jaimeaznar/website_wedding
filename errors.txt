(venv) jaimeaznar@Jaimes-MacBook-Pro-2 website_wedding % pytest -v
========================================================== test session starts ==========================================================
platform darwin -- Python 3.13.1, pytest-7.4.3, pluggy-1.5.0 -- /Users/jaimeaznar/Desktop/website_wedding/venv/bin/python3.13
cachedir: .pytest_cache
rootdir: /Users/jaimeaznar/Desktop/website_wedding
plugins: flask-1.3.0, cov-4.1.0, mock-3.14.0, flask-sqlalchemy-1.1.0
collected 37 items                                                                                                                      

tests/test_functional.py::TestMainNavigation::test_home_page SKIPPED (Functional tests are disabled. Set RUN_FUNCTIONAL_TESTS...) [  2%]
tests/test_functional.py::TestRSVPProcess::test_rsvp_attending_flow SKIPPED (Functional tests are disabled. Set RUN_FUNCTIONA...) [  5%]
tests/test_functional.py::TestRSVPProcess::test_rsvp_not_attending_flow SKIPPED (Functional tests are disabled. Set RUN_FUNCT...) [  8%]
tests/test_functional.py::TestAdminInterface::test_admin_login_and_dashboard SKIPPED (Functional tests are disabled. Set RUN_...) [ 10%]
tests/test_functional.py::TestAdminInterface::test_admin_add_guest SKIPPED (Functional tests are disabled. Set RUN_FUNCTIONAL...) [ 13%]
tests/test_models.py::TestGuestModel::test_create_guest PASSED                                                                    [ 16%]
tests/test_models.py::TestGuestModel::test_guest_rsvp_relationship PASSED                                                         [ 18%]
tests/test_models.py::TestRSVPModel::test_create_rsvp PASSED                                                                      [ 21%]
tests/test_models.py::TestRSVPModel::test_is_editable_property FAILED                                                             [ 24%]
tests/test_models.py::TestRSVPModel::test_cancel_method PASSED                                                                    [ 27%]
tests/test_models.py::TestAllergenModel::test_create_allergen PASSED                                                              [ 29%]
tests/test_models.py::TestAllergenModel::test_create_guest_allergen PASSED                                                        [ 32%]
tests/test_models.py::TestAdditionalGuestModel::test_create_additional_guest PASSED                                               [ 35%]
tests/test_routes.py::TestMainRoutes::test_index_route PASSED                                                                     [ 37%]
tests/test_routes.py::TestMainRoutes::test_schedule_route PASSED                                                                  [ 40%]
tests/test_routes.py::TestMainRoutes::test_venue_route PASSED                                                                     [ 43%]
tests/test_routes.py::TestMainRoutes::test_language_switching PASSED                                                              [ 45%]
tests/test_routes.py::TestRSVPRoutes::test_rsvp_landing PASSED                                                                    [ 48%]
tests/test_routes.py::TestRSVPRoutes::test_rsvp_form_with_valid_token PASSED                                                      [ 51%]
tests/test_routes.py::TestRSVPRoutes::test_rsvp_form_with_invalid_token PASSED                                                    [ 54%]
tests/test_routes.py::TestRSVPRoutes::test_rsvp_submission PASSED                                                                 [ 56%]
tests/test_routes.py::TestRSVPRoutes::test_rsvp_cancel PASSED                                                                     [ 59%]
tests/test_routes.py::TestAdminRoutes::test_admin_login_page PASSED                                                               [ 62%]
tests/test_routes.py::TestAdminRoutes::test_admin_login_success PASSED                                                            [ 64%]
tests/test_routes.py::TestAdminRoutes::test_admin_dashboard ERROR                                                                 [ 67%]
tests/test_routes.py::TestAdminRoutes::test_admin_add_guest ERROR                                                                 [ 70%]
tests/test_routes.py::TestAdminRoutes::test_admin_download_template ERROR                                                         [ 72%]
tests/test_routes.py::TestAdminRoutes::test_admin_logout ERROR                                                                    [ 75%]
tests/test_utils.py::TestImportGuests::test_process_guest_csv_valid PASSED                                                        [ 78%]
tests/test_utils.py::TestImportGuests::test_process_guest_csv_missing_headers PASSED                                              [ 81%]
tests/test_utils.py::TestImportGuests::test_process_guest_csv_missing_required_fields PASSED                                      [ 83%]
tests/test_utils.py::TestRSVPHelpers::test_process_allergens FAILED                                                               [ 86%]
tests/test_utils.py::TestRSVPValidator::test_validate_attendance PASSED                                                           [ 89%]
tests/test_utils.py::TestRSVPValidator::test_validate_transport PASSED                                                            [ 91%]
tests/test_utils.py::TestRSVPValidator::test_validate_family_members PASSED                                                       [ 94%]
tests/test_utils.py::TestRSVPProcessor::test_process_success PASSED                                                               [ 97%]
tests/test_utils.py::TestRSVPProcessor::test_process_validation_failure PASSED                                                    [100%]

================================================================ ERRORS =================================================================
________________________________________ ERROR at setup of TestAdminRoutes.test_admin_dashboard _________________________________________

client = <FlaskClient <Flask 'app'>>, app = <Flask 'app'>

    @pytest.fixture(scope='function')
    def auth_client(client, app):
        """Create an authenticated client."""
        with client.session_transaction() as session:
            session['admin_logged_in'] = True
    
        # Fix: Use the correct signature for set_cookie
>       client.set_cookie('127.0.0.1', 'admin_authenticated', 'true')
E       TypeError: Client.set_cookie() takes from 2 to 3 positional arguments but 4 were given

tests/conftest.py:83: TypeError
--------------------------------------------------------- Captured stdout setup ---------------------------------------------------------
Creating Flask app...
Registering blueprints...
Blueprints registered!
Available routes:
static: /static/<path:filename>
main.index: /
main.schedule: /schedule
main.venue: /venue
main.accommodation: /accommodation
main.activities: /activities
main.gallery: /gallery
auth.login: /auth/login
rsvp.landing: /rsvp/
rsvp.rsvp_form: /rsvp/<token>
rsvp.cancel_rsvp: /rsvp/<token>/cancel
rsvp.confirmation: /rsvp/confirmation
admin.login: /admin/login
admin.dashboard: /admin/dashboard
admin.add_guest: /admin/guest/add
admin.import_guests: /admin/guest/import
admin.download_template: /admin/download-template
admin.logout: /admin/logout
---------------------------------------------------------- Captured log setup -----------------------------------------------------------
INFO     app:logging_config.py:42 Wedding application startup
________________________________________ ERROR at setup of TestAdminRoutes.test_admin_add_guest _________________________________________

client = <FlaskClient <Flask 'app'>>, app = <Flask 'app'>

    @pytest.fixture(scope='function')
    def auth_client(client, app):
        """Create an authenticated client."""
        with client.session_transaction() as session:
            session['admin_logged_in'] = True
    
        # Fix: Use the correct signature for set_cookie
>       client.set_cookie('127.0.0.1', 'admin_authenticated', 'true')
E       TypeError: Client.set_cookie() takes from 2 to 3 positional arguments but 4 were given

tests/conftest.py:83: TypeError
--------------------------------------------------------- Captured stdout setup ---------------------------------------------------------
Creating Flask app...
Registering blueprints...
Blueprints registered!
Available routes:
static: /static/<path:filename>
main.index: /
main.schedule: /schedule
main.venue: /venue
main.accommodation: /accommodation
main.activities: /activities
main.gallery: /gallery
auth.login: /auth/login
rsvp.landing: /rsvp/
rsvp.rsvp_form: /rsvp/<token>
rsvp.cancel_rsvp: /rsvp/<token>/cancel
rsvp.confirmation: /rsvp/confirmation
admin.login: /admin/login
admin.dashboard: /admin/dashboard
admin.add_guest: /admin/guest/add
admin.import_guests: /admin/guest/import
admin.download_template: /admin/download-template
admin.logout: /admin/logout
---------------------------------------------------------- Captured log setup -----------------------------------------------------------
INFO     app:logging_config.py:42 Wedding application startup
____________________________________ ERROR at setup of TestAdminRoutes.test_admin_download_template _____________________________________

client = <FlaskClient <Flask 'app'>>, app = <Flask 'app'>

    @pytest.fixture(scope='function')
    def auth_client(client, app):
        """Create an authenticated client."""
        with client.session_transaction() as session:
            session['admin_logged_in'] = True
    
        # Fix: Use the correct signature for set_cookie
>       client.set_cookie('127.0.0.1', 'admin_authenticated', 'true')
E       TypeError: Client.set_cookie() takes from 2 to 3 positional arguments but 4 were given

tests/conftest.py:83: TypeError
--------------------------------------------------------- Captured stdout setup ---------------------------------------------------------
Creating Flask app...
Registering blueprints...
Blueprints registered!
Available routes:
static: /static/<path:filename>
main.index: /
main.schedule: /schedule
main.venue: /venue
main.accommodation: /accommodation
main.activities: /activities
main.gallery: /gallery
auth.login: /auth/login
rsvp.landing: /rsvp/
rsvp.rsvp_form: /rsvp/<token>
rsvp.cancel_rsvp: /rsvp/<token>/cancel
rsvp.confirmation: /rsvp/confirmation
admin.login: /admin/login
admin.dashboard: /admin/dashboard
admin.add_guest: /admin/guest/add
admin.import_guests: /admin/guest/import
admin.download_template: /admin/download-template
admin.logout: /admin/logout
---------------------------------------------------------- Captured log setup -----------------------------------------------------------
INFO     app:logging_config.py:42 Wedding application startup
__________________________________________ ERROR at setup of TestAdminRoutes.test_admin_logout __________________________________________

client = <FlaskClient <Flask 'app'>>, app = <Flask 'app'>

    @pytest.fixture(scope='function')
    def auth_client(client, app):
        """Create an authenticated client."""
        with client.session_transaction() as session:
            session['admin_logged_in'] = True
    
        # Fix: Use the correct signature for set_cookie
>       client.set_cookie('127.0.0.1', 'admin_authenticated', 'true')
E       TypeError: Client.set_cookie() takes from 2 to 3 positional arguments but 4 were given

tests/conftest.py:83: TypeError
--------------------------------------------------------- Captured stdout setup ---------------------------------------------------------
Creating Flask app...
Registering blueprints...
Blueprints registered!
Available routes:
static: /static/<path:filename>
main.index: /
main.schedule: /schedule
main.venue: /venue
main.accommodation: /accommodation
main.activities: /activities
main.gallery: /gallery
auth.login: /auth/login
rsvp.landing: /rsvp/
rsvp.rsvp_form: /rsvp/<token>
rsvp.cancel_rsvp: /rsvp/<token>/cancel
rsvp.confirmation: /rsvp/confirmation
admin.login: /admin/login
admin.dashboard: /admin/dashboard
admin.add_guest: /admin/guest/add
admin.import_guests: /admin/guest/import
admin.download_template: /admin/download-template
admin.logout: /admin/logout
---------------------------------------------------------- Captured log setup -----------------------------------------------------------
INFO     app:logging_config.py:42 Wedding application startup
=============================================================== FAILURES ================================================================
________________________________________________ TestRSVPModel.test_is_editable_property ________________________________________________

self = <tests.test_models.TestRSVPModel object at 0x11298ad50>, app = <Flask 'app'>, sample_rsvp = <RSVP 1>

    def test_is_editable_property(self, app, sample_rsvp):
        with app.app_context():
            # Should be editable if created within the last 24 hours
            assert sample_rsvp.is_editable is True
    
            # Set created_at to more than 24 hours ago
            sample_rsvp.created_at = datetime.now() - timedelta(hours=25)
            db.session.commit()
>           assert sample_rsvp.is_editable is False
E           assert True is False
E            +  where True = <RSVP 1>.is_editable

tests/test_models.py:75: AssertionError
--------------------------------------------------------- Captured stdout setup ---------------------------------------------------------
Creating Flask app...
Registering blueprints...
Blueprints registered!
Available routes:
static: /static/<path:filename>
main.index: /
main.schedule: /schedule
main.venue: /venue
main.accommodation: /accommodation
main.activities: /activities
main.gallery: /gallery
auth.login: /auth/login
rsvp.landing: /rsvp/
rsvp.rsvp_form: /rsvp/<token>
rsvp.cancel_rsvp: /rsvp/<token>/cancel
rsvp.confirmation: /rsvp/confirmation
admin.login: /admin/login
admin.dashboard: /admin/dashboard
admin.add_guest: /admin/guest/add
admin.import_guests: /admin/guest/import
admin.download_template: /admin/download-template
admin.logout: /admin/logout
---------------------------------------------------------- Captured log setup -----------------------------------------------------------
INFO     app:logging_config.py:42 Wedding application startup
________________________________________________ TestRSVPHelpers.test_process_allergens _________________________________________________

self = <tests.test_utils.TestRSVPHelpers object at 0x112a44050>, app = <Flask 'app'>, sample_rsvp = <RSVP 1>

    def test_process_allergens(self, app, sample_rsvp):
        """Test processing allergens from form data."""
        with app.app_context():
            # Create sample allergens within this session
            allergen1 = Allergen(name="Peanuts")
            allergen2 = Allergen(name="Gluten")
>           db.session.add(allergen1)
E           NameError: name 'db' is not defined

tests/test_utils.py:61: NameError
--------------------------------------------------------- Captured stdout setup ---------------------------------------------------------
Creating Flask app...
Registering blueprints...
Blueprints registered!
Available routes:
static: /static/<path:filename>
main.index: /
main.schedule: /schedule
main.venue: /venue
main.accommodation: /accommodation
main.activities: /activities
main.gallery: /gallery
auth.login: /auth/login
rsvp.landing: /rsvp/
rsvp.rsvp_form: /rsvp/<token>
rsvp.cancel_rsvp: /rsvp/<token>/cancel
rsvp.confirmation: /rsvp/confirmation
admin.login: /admin/login
admin.dashboard: /admin/dashboard
admin.add_guest: /admin/guest/add
admin.import_guests: /admin/guest/import
admin.download_template: /admin/download-template
admin.logout: /admin/logout
---------------------------------------------------------- Captured log setup -----------------------------------------------------------
INFO     app:logging_config.py:42 Wedding application startup
=========================================================== warnings summary ============================================================
tests/test_models.py::TestGuestModel::test_guest_rsvp_relationship
  /Users/jaimeaznar/Desktop/website_wedding/tests/test_models.py:40: LegacyAPIWarning: The Query.get() method is considered legacy as of the 1.x series of SQLAlchemy and becomes a legacy construct in 2.0. The method is now available as Session.get() (deprecated since: 2.0) (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)
    guest = Guest.query.get(sample_guest.id)

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
======================================================== short test summary info ========================================================
FAILED tests/test_models.py::TestRSVPModel::test_is_editable_property - assert True is False
FAILED tests/test_utils.py::TestRSVPHelpers::test_process_allergens - NameError: name 'db' is not defined
ERROR tests/test_routes.py::TestAdminRoutes::test_admin_dashboard - TypeError: Client.set_cookie() takes from 2 to 3 positional arguments but 4 were given
ERROR tests/test_routes.py::TestAdminRoutes::test_admin_add_guest - TypeError: Client.set_cookie() takes from 2 to 3 positional arguments but 4 were given
ERROR tests/test_routes.py::TestAdminRoutes::test_admin_download_template - TypeError: Client.set_cookie() takes from 2 to 3 positional arguments but 4 were given
ERROR tests/test_routes.py::TestAdminRoutes::test_admin_logout - TypeError: Client.set_cookie() takes from 2 to 3 positional arguments but 4 were given
===================================== 2 failed, 26 passed, 5 skipped, 1 warning, 4 errors in 1.14s ======================================
(venv) jaimeaznar@Jaimes-MacBook-Pro-2 website_wedding % 